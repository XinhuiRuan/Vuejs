<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>过滤器和指令</title>
    <script src="../vue.js"></script>
    <script src="../moment.js"></script>
    <style>
        /* 属性选择器 */
        [v-cloak] {
            display:none
        }
    </style>
</head>
<body>
    <!--
       1. 常用内置指令
          v-text：更新元素的textContent
          v-html：更新元素的innerHTML
          v-if：如果为true，当前标签才会输出页面
          v-else：如果为false，当前标签才会输出到页面
          v-show：通过控制display样式来控制显示/隐藏
          v-for：遍历数组/对象
          v-on：绑定事件监听，一般简写为@
          v-bind：强制绑定解析表达式，可以省略为：
          v-model：双向数据绑定
          ref：指定唯一标识，vue对象通过$els属性访问这个元素对象
          v-cloak:防止闪现，与css配合：[v-cloak]{display:none} 
        
        2. 自定义指令
            1> 注册全局指令
                el：指令属性所在的标签对象
                binding: 包含指令相关信息的对象
                Vue.directive('my-directive',function(el, binding){
                    el.innerHTML = binding.value.toUpperCase();
                })
            2> 注册局部指令
                directives: {
                    'my-directive' : function(el, binding){
                            el.innerHTML = binding.value.toUpperCase();
                        }
                    }
                }
            3> 使用指令
                v-my-directive = 'xxx'
    -->
    <div id="app">
        <h2>1. 显示格式化的日期时间</h2>
            <p>{{date}}</p>
            <p>完整版：{{date | dateStr}}</p>
            <p>年月日：{{date | dateStr('YYYY-MM-DD')}}</p>
            <p>时分秒：{{date | dateStr('HH:mm:ss')}}</p>

        <h2>2. 常用内置指令</h2>
        <!-- ref指令 -->
        <p ref="content">baidu.com</p>
        <button @click="hint">提示</button>
        <!-- v-cloak指令 -->
        <p v-cloak>{{msg}}</p>

        <h2>3. 自定义指令</h2>
        <!-- 1. 自定义功能类似于v-text, 但转换为全大写 v-upper-text
             2. 自定义功能类似于v-text, 但转换为全小写 v-lower-text
        -->
        <p v-upper-text="test"></p>
        <p v-lower-text="test"></p>
    </div>
    
 <script>
    
     // 定义过滤器(使用函数对象)
    //  Vue.filter('dateStr',function(value,format){
    //      // 利用github上的moment.js插件
    //     return moment(value).format(format || "YYYY-MM-DD HH:mm:ss");
    //  })

     Vue.filter('dateStr',function(value,format = "YYYY-MM-DD HH:mm:ss"){  // 或者使用形参默认值（JS的形参默认值方法）
         // 利用github上的moment.js插件
        return moment(value).format(format);
     })

     // 定义全局指令
     Vue.directive('upper-text',function(el, binding){
         //console.log(el,binding);
         el.innerHTML = binding.value.toUpperCase();
     })

     var vm = new Vue({
        el:"#app",
        data:{
          date: new Date(),
          msg:'群创光电',
          test: "Happy New Year"
        },
        methods:{
            hint(){
                alert (this.$refs.content.textContent);
            }
        },
        // 定义局部指令，只在当前vue定义对象的范围内有效
        directives: {
                    // 对象里面的属性名存在（-，空格）时必须写引号
                    'lower-text' : function(el, binding){
                        el.innerHTML = binding.value.toLowerCase();
                    }
                }
     });
</script>   
</body>
</html>